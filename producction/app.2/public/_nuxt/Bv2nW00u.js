import{_ as V,s as A,c as n,o as i,a as t,t as r,m as e,l as $,k as v,F as T,p as M,n as O,d as R,v as S,x as h,y,A as D,D as U,B as z,b as F}from"./-XG8-ux0.js";import{u as I}from"./ChvDBiId.js";import{u as L}from"./Dl3r-oLy.js";const P={class:"container"},j={class:"card"},E=["src","alt"],G={class:"card-header"},H={class:"badge"},J={class:"title"},K=["title"],Q={class:"ticket-section"},W={class:"options"},X=["onClick"],Y={key:0},Z={key:1},ee={class:"counter"},te={class:"count",style:{width:"250px !important"}},se={class:"total"},oe={key:0,class:"warning"},le={key:1,class:"warning"},ae=["disabled"],ne=["disabled"],ie=["disabled"],re={__name:"BuyCard",props:{raffle:{type:Object,required:!0},ticketOptions:{type:Array,default:()=>[2,5,10,20,30,50]},popularAmount:{type:Number,default:5}},setup(l){const d=l,a=A({fullName:"",email:"",phone:"",whatsapp:"",cedula:""}),{quantity:u,selectedOption:k,isProcessing:c,total:_,tooltip:f,remaining:p,selectOption:b,increment:m,decrement:g,reset:C,checkout:q}=L(d.raffle.price,2,d.raffle.totalNumbers-d.raffle.soldNumbers),w=()=>{q(d.raffle,a)};return(B,o)=>{var N;return i(),n("div",P,[t("div",j,[t("img",{src:l.raffle.imageMain,alt:l.raffle.title},null,8,E),t("div",G,[t("span",H,r((N=l.raffle.createdAt)==null?void 0:N.split("T")[0]),1),t("span",null,"Boleto "+r(l.raffle.price?`Bs. ${l.raffle.price}`:"-"),1)]),t("div",J,r(l.raffle.title),1),t("div",{class:"progress-bar",title:e(f)},[t("div",{class:"progress-bar-inner",style:$({width:l.raffle.percentSold+"%"})},null,4)],8,K)]),t("div",Q,[o[8]||(o[8]=t("h3",null,"Compra aquí tus boletos",-1)),t("div",W,[(i(!0),n(T,null,M(l.ticketOptions,(s,x)=>(i(),n("div",{key:x,class:O(["option",{active:e(k)===s}]),onClick:_e=>e(b)(s)},[R(" +"+r(s),1),s===l.popularAmount?(i(),n("br",Y)):v("",!0),s===l.popularAmount?(i(),n("small",Z,"Más popular")):v("",!0)],10,X))),128))]),t("div",ee,[t("button",{onClick:o[0]||(o[0]=(...s)=>e(g)&&e(g)(...s))},"-"),t("span",te,r(e(u)),1),t("button",{onClick:o[1]||(o[1]=(...s)=>e(m)&&e(m)(...s))},"+")]),t("div",se,"💰 Total: Bs. "+r(e(_)),1),e(u)<2?(i(),n("p",oe,"⚠️ Mínimo 2 boletos requeridos")):v("",!0),e(u)>e(p)?(i(),n("p",le,"⚠️ Solo quedan "+r(e(p))+" disponibles",1)):v("",!0),t("form",{onSubmit:S(w,["prevent"])},[h(t("input",{class:"form_input","onUpdate:modelValue":o[2]||(o[2]=s=>a.fullName=s),placeholder:"Nombre completo",required:""},null,512),[[y,a.fullName]]),h(t("input",{class:"form_input","onUpdate:modelValue":o[3]||(o[3]=s=>a.email=s),placeholder:"Correo electrónico",type:"email",required:""},null,512),[[y,a.email]]),h(t("input",{class:"form_input","onUpdate:modelValue":o[4]||(o[4]=s=>a.phone=s),placeholder:"Teléfono",type:"number",required:""},null,512),[[y,a.phone]]),h(t("input",{class:"form_input","onUpdate:modelValue":o[5]||(o[5]=s=>a.cedula=s),placeholder:"Cédula",type:"number",required:""},null,512),[[y,a.cedula]]),t("button",{class:"btn",disabled:e(u)<2||e(u)>e(p)||e(c)},r(e(c)?"Procesando...":"Comprar boletos"),9,ae)],32),t("button",{class:"btn btn-outline",onClick:o[6]||(o[6]=(...s)=>e(C)&&e(C)(...s)),disabled:e(c)},"Limpiar",8,ne),t("button",{class:"btn btn-outline",onClick:o[7]||(o[7]=()=>B.alert("Ver detalle")),disabled:e(c)},"Ver detalle",8,ie)])])}}},de=V(re,[["__scopeId","data-v-d9fbe7cf"]]),ue={key:0,class:"not-found"},ce={key:1,class:"loading"},fe={key:2,class:"error"},pe={key:3},me={__name:"[slug]",async setup(l){let d,a;const k=D().params.slug,{raffles:c,loading:_,error:f,fetchRaffles:p}=I();[d,a]=U(()=>p()),await d,a();const b=z(()=>c.value.find(m=>m.slug===k));return(m,g)=>(i(),n("div",null,[!b.value&&!e(_)&&!e(f)?(i(),n("div",ue,"Rifa no encontrada.")):e(_)?(i(),n("div",ce,"Cargando rifa...")):e(f)?(i(),n("div",fe,r(e(f)),1)):(i(),n("div",pe,[F(de,{raffle:b.value},null,8,["raffle"])]))]))}},ye=V(me,[["__scopeId","data-v-381c586e"]]);export{ye as default};
