import{r,E as g,g as m}from"./-XG8-ux0.js";const p=window.setInterval,i="raffles_cache",f=5*60*1e3;function w(){const a=r([]),s=r(!1),n=r(null),c=g().public.NUXT_PUBLIC_BASE_API||"https://api.ganaconleadershoes.com/api";function u(e){return!e||!e.timestamp||!e.data?!1:new Date().getTime()-e.timestamp<f}async function o(e=!1){try{s.value=!0,n.value=null;{const l=JSON.parse(localStorage.getItem(i));if(!e&&u(l)){a.value=l.data;return}}const t=await $fetch(`${c}/raffles`);a.value=t||[],localStorage.setItem(i,JSON.stringify({data:a.value,timestamp:new Date().getTime()}))}catch(t){n.value="No se pudieron cargar las rifas",console.error(t)}finally{s.value=!1}}return m(()=>{o(),p(()=>o(!0),f),console.log("Pagina actualizada cada 5 min...")}),{raffles:a,loading:s,error:n,fetchRaffles:o}}export{p as s,w as u};
